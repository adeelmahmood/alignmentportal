/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a){function b(){if(this.isDisposed)throw new Error(Hb)}function c(a,b){if(Ib&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(Mb)){for(var c=[],e=b;e;e=e.source)e.stack&&c.unshift(e.stack);c.unshift(a.stack);var f=c.join("\n"+Mb+"\n");a.stack=d(f)}}function d(a){for(var b=a.split("\n"),c=[],d=0,g=b.length;g>d;d++){var h=b[d];e(h)||f(h)||!h||c.push(h)}return c.join("\n")}function e(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return console.log(Kb,Lb,Ud),c===Kb&&d>=Lb&&Ud>=d}function f(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function g(){if(Ib)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=h(c);if(!d)return;return Kb=d[0],d[1]}}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(a){var b=typeof a;return a&&("function"==b||"object"==b)||!1}function j(a){var b=[];if(!i(a))return b;kc.nonEnumArgs&&a.length&&lc(a)&&(a=nc.call(a));var c=kc.enumPrototypes&&"function"==typeof a,d=kc.enumErrorProps&&(a===ec||a instanceof Error);for(var e in a)c&&"prototype"==e||d&&("message"==e||"name"==e)||b.push(e);if(kc.nonEnumShadows&&a!==fc){var f=a.constructor,g=-1,h=ic.length;if(a===(f&&f.prototype))var j=a===gc?ac:a===ec?Xb:bc.call(a),k=jc[j];for(;++g<h;)e=ic[g],k&&k[e]||!cc.call(a,e)||b.push(e)}return b}function k(a,b,c){for(var d=-1,e=c(a),f=e.length;++d<f;){var g=e[d];if(b(a[g],g,a)===!1)break}return a}function l(a,b){return k(a,b,j)}function m(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function n(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;var e=typeof a,f=typeof b;if(a===a&&(null==a||null==b||"function"!=e&&"object"!=e&&"function"!=f&&"object"!=f))return!1;var g=bc.call(a),h=bc.call(b);if(g==Tb&&(g=$b),h==Tb&&(h=$b),g!=h)return!1;switch(g){case Vb:case Wb:return+a==+b;case Zb:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case _b:case ac:return a==String(b)}var i=g==Ub;if(!i){if(g!=$b||!kc.nodeClass&&(m(a)||m(b)))return!1;var j=!kc.argsObject&&lc(a)?Object:a.constructor,k=!kc.argsObject&&lc(b)?Object:b.constructor;if(!(j==k||cc.call(a,"constructor")&&cc.call(b,"constructor")||Eb(j)&&j instanceof j&&Eb(k)&&k instanceof k||!("constructor"in a&&"constructor"in b)))return!1}c||(c=[]),d||(d=[]);for(var o=c.length;o--;)if(c[o]==a)return d[o]==b;var p=0,q=!0;if(c.push(a),d.push(b),i){if(o=a.length,p=b.length,q=p==o)for(;p--;){var r=b[p];if(!(q=n(a[p],r,c,d)))break}}else l(b,function(b,e,f){return cc.call(f,e)?(p++,q=cc.call(a,e)&&n(a[e],b,c,d)):void 0}),q&&l(a,function(a,b,c){return cc.call(c,b)?q=--p>-1:void 0});return c.pop(),d.pop(),q}function o(a,b){return 1===a.length&&Array.isArray(a[b])?a[b]:nc.call(a)}function p(a,b){for(var c=new Array(a),d=0;a>d;d++)c[d]=b();return c}function q(a,b){this.id=a,this.value=b}function r(a,b){this.scheduler=a,this.disposable=b,this.isDisposed=!1}function t(){this._s=s}function u(){this._s=s,this._l=s.length,this._i=0}function v(a){this._a=a}function w(a){this._a=a,this._l=A(a),this._i=0}function x(a){return"number"==typeof a&&pb.isFinite(a)}function y(b){var c,d=b[Nb];if(!d&&"string"==typeof b)return c=new t(b),c[Nb]();if(!d&&b.length!==a)return c=new v(b),c[Nb]();if(!d)throw new TypeError("Object is not iterable");return b[Nb]()}function z(a){var b=+a;return 0===b?b:isNaN(b)?b:0>b?-1:1}function A(a){var b=+a.length;return isNaN(b)?0:0!==b&&x(b)?(b=z(b)*Math.floor(Math.abs(b)),0>=b?0:b>gd?gd:b):b}function B(a,b){return wb(a)||(a=Hc),new Od(function(c){var d=0,e=b.length;return a.scheduleRecursive(function(a){e>d?(c.onNext(b[d++]),a()):c.onCompleted()})})}function C(a,b){return new Od(function(c){var d=new yc,e=new zc;return e.setDisposable(d),d.setDisposable(a.subscribe(c.onNext.bind(c),function(a){var d,f;try{f=b(a)}catch(g){return void c.onError(g)}Cb(f)&&(f=dd(f)),d=new yc,e.setDisposable(d),d.setDisposable(f.subscribe(c))},c.onCompleted.bind(c))),e})}function D(a,b){var c=this;return new Od(function(d){var e=0,f=a.length;return c.subscribe(function(c){if(f>e){var g,h=a[e++];try{g=b(c,h)}catch(i){return void d.onError(i)}d.onNext(g)}else d.onCompleted()},d.onError.bind(d),d.onCompleted.bind(d))})}function E(a,b,c){return a.map(function(d,e){var f=b.call(c,d,e,a);return Cb(f)&&(f=dd(f)),(Qb(f)||Pb(f))&&(f=hd(f)),f}).concatAll()}function F(a,b,c){for(var d=0,e=a.length;e>d;d++)if(c(a[d],b))return d;return-1}function G(a){this.comparer=a,this.set=[]}function H(a,b,c){return a.map(function(d,e){var f=b.call(c,d,e,a);return Cb(f)&&(f=dd(f)),(Qb(f)||Pb(f))&&(f=hd(f)),f}).mergeAll()}function I(a,b,c){return new Od(function(d){var e=!1,f=null,g=[];return a.subscribe(function(a){var h,i;try{i=b(a)}catch(j){return void d.onError(j)}if(h=0,e)try{h=c(i,f)}catch(k){return void d.onError(k)}else e=!0,f=i;h>0&&(f=i,g=[]),h>=0&&g.push(a)},d.onError.bind(d),function(){d.onNext(g),d.onCompleted()})})}function J(a){if(0===a.length)throw new Error(Fb);return a[0]}function K(a,b,c,d){if(0>b)throw new Error(Gb);return new Od(function(e){var f=b;return a.subscribe(function(a){0===f&&(e.onNext(a),e.onCompleted()),f--},e.onError.bind(e),function(){c?(e.onNext(d),e.onCompleted()):e.onError(new Error(Gb))})})}function L(a,b,c){return new Od(function(d){var e=c,f=!1;return a.subscribe(function(a){f?d.onError(new Error("Sequence contains more than one element")):(e=a,f=!0)},d.onError.bind(d),function(){f||b?(d.onNext(e),d.onCompleted()):d.onError(new Error(Fb))})})}function M(a,b,c){return new Od(function(d){return a.subscribe(function(a){d.onNext(a),d.onCompleted()},d.onError.bind(d),function(){b?(d.onNext(c),d.onCompleted()):d.onError(new Error(Fb))})})}function N(a,b,c){return new Od(function(d){var e=c,f=!1;return a.subscribe(function(a){e=a,f=!0},d.onError.bind(d),function(){f||b?(d.onNext(e),d.onCompleted()):d.onError(new Error(Fb))})})}function O(b,c,d,e){return new Od(function(f){var g=0;return b.subscribe(function(a){var h;try{h=c.call(d,a,g,b)}catch(i){return void f.onError(i)}h?(f.onNext(e?g:a),f.onCompleted()):g++},f.onError.bind(f),function(){f.onNext(e?-1:a),f.onCompleted()})})}function P(a,b){return Array.isArray(a)?Q.call(b,a):U(a)?td(a.call(b)):V(a)?td(a):T(a)?R(a):Cb(a)?S(a):typeof a===rd?a:i(a)||Array.isArray(a)?Q.call(b,a):a}function Q(a){var b=this;return function(c){function d(a,d){if(!e)try{if(a=P(a,b),typeof a!==rd)return h[d]=a,--g||c(null,h);a.call(b,function(a,b){if(!e){if(a)return e=!0,c(a);h[d]=b,--g||c(null,h)}})}catch(f){e=!0,c(f)}}var e,f=Object.keys(a),g=f.length,h=new a.constructor;if(!g)return void Mc.schedule(function(){c(null,h)});for(var i=0,j=f.length;j>i;i++)d(a[f[i]],f[i])}}function R(a){return function(b){var c,d=!1;a.subscribe(function(a){c=a,d=!0},b,function(){d&&b(null,c)})}}function S(a){return function(b){a.then(function(a){b(null,a)},b)}}function T(a){return a&&typeof a.subscribe===rd}function U(a){return a&&a.constructor&&"GeneratorFunction"===a.constructor.name}function V(a){return a&&typeof a.next===rd&&typeof a[sd]===rd}function i(a){return a&&a.constructor===Object}function W(a){a&&Mc.schedule(function(){throw a})}function X(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1),wc(function(){a.removeEventListener(b,c,!1)});throw new Error("No listener found")}function Y(a,b,c){var d=new tc;if("[object NodeList]"===Object.prototype.toString.call(a))for(var e=0,f=a.length;f>e;e++)d.add(Y(a.item(e),b,c));else a&&d.add(X(a,b,c));return d}function Z(a,b,c){return new Od(function(d){function e(a,b){j[b]=a;var e;if(g[b]=!0,h||(h=g.every(xb))){if(f)return void d.onError(f);try{e=c.apply(null,j)}catch(k){return void d.onError(k)}d.onNext(e)}i&&j[1]&&d.onCompleted()}var f,g=[!1,!1],h=!1,i=!1,j=new Array(2);return new tc(a.subscribe(function(a){e(a,0)},function(a){j[1]?d.onError(a):f=a},function(){i=!0,j[1]&&d.onCompleted()}),b.subscribe(function(a){e(a,1)},d.onError.bind(d),function(){i=!0,e(!0,1)}))})}function $(a,b){return a.groupJoin(this,b,fd,function(a,b){return b})}function _(a){var b=this;return new Od(function(c){var d=new Rd,e=new tc,f=new Ac(e);return c.onNext(qc(d,f)),e.add(b.subscribe(function(a){d.onNext(a)},function(a){d.onError(a),c.onError(a)},function(){d.onCompleted(),c.onCompleted()})),Cb(a)&&(a=dd(a)),e.add(a.subscribe(function(){d.onCompleted(),d=new Rd,c.onNext(qc(d,f))},function(a){d.onError(a),c.onError(a)},function(){d.onCompleted(),c.onCompleted()})),f})}function ab(a){var b=this;return new Od(function(c){function d(){var b;try{b=a()}catch(f){return void c.onError(f)}Cb(b)&&(b=dd(b));var i=new yc;e.setDisposable(i),i.setDisposable(b.take(1).subscribe(vb,function(a){h.onError(a),c.onError(a)},function(){h.onCompleted(),h=new Rd,c.onNext(qc(h,g)),d()}))}var e=new zc,f=new tc(e),g=new Ac(f),h=new Rd;return c.onNext(qc(h,g)),f.add(b.subscribe(function(a){h.onNext(a)},function(a){h.onError(a),c.onError(a)},function(){h.onCompleted(),c.onCompleted()})),d(),g})}function bb(b,c){return new Tc(function(){return new Sc(function(){return b()?{done:!1,value:c}:{done:!0,value:a}})})}function db(a){this.patterns=a}function eb(a,b){this.expression=a,this.selector=b}function fb(a,b,c){var d=a.get(b);if(!d){var e=new Ld(b,c);return a.set(b,e),e}return d}function gb(a,b,c){this.joinObserverArray=a,this.onNext=b,this.onCompleted=c,this.joinObservers=new Kd;for(var d=0,e=this.joinObserverArray.length;e>d;d++){var f=this.joinObserverArray[d];this.joinObservers.set(f,f)}}function hb(a,b){return new Od(function(c){return b.scheduleWithAbsolute(a,function(){c.onNext(0),c.onCompleted()})})}function ib(a,b,c){return new Od(function(d){var e=0,f=a,g=Dc(b);return c.scheduleRecursiveWithAbsolute(f,function(a){if(g>0){var b=c.now();f+=g,b>=f&&(f=b+g)}d.onNext(e++),a(f)})})}function jb(a,b){return new Od(function(c){return b.scheduleWithRelative(Dc(a),function(){c.onNext(0),c.onCompleted()})})}function kb(a,b,c){return a===b?new Od(function(a){return c.schedulePeriodicWithState(0,b,function(b){return a.onNext(b),b+1})}):ed(function(){return ib(c.now()+a,b,c)})}function lb(a,b,c){return new Od(function(d){var e,f=!1,g=new zc,h=null,i=[],j=!1;return e=a.materialize().timestamp(c).subscribe(function(a){var e,k;"E"===a.value.kind?(i=[],i.push(a),h=a.value.exception,k=!j):(i.push({value:a.value,timestamp:a.timestamp+b}),k=!f,f=!0),k&&(null!==h?d.onError(h):(e=new yc,g.setDisposable(e),e.setDisposable(c.scheduleRecursiveWithRelative(b,function(a){var b,e,g,k;if(null===h){j=!0;do g=null,i.length>0&&i[0].timestamp-c.now()<=0&&(g=i.shift().value),null!==g&&g.accept(d);while(null!==g);k=!1,e=0,i.length>0?(k=!0,e=Math.max(0,i[0].timestamp-c.now())):f=!1,b=h,j=!1,null!==b?d.onError(b):k&&a(e)}}))))}),new tc(e,g)})}function mb(a,b,c){return ed(function(){return lb(a,b-c.now(),c)})}function nb(a,b){return new Od(function(c){function d(){g&&(g=!1,c.onNext(f)),e&&c.onCompleted()}var e,f,g;return new tc(a.subscribe(function(a){g=!0,f=a},c.onError.bind(c),function(){e=!0}),b.subscribe(d,c.onError.bind(c),d))})}var ob={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},pb=ob[typeof window]&&window||this,qb=ob[typeof exports]&&exports&&!exports.nodeType&&exports,rb=ob[typeof module]&&module&&!module.nodeType&&module,sb=rb&&rb.exports===qb&&qb,tb=ob[typeof global]&&global;!tb||tb.global!==tb&&tb.window!==tb||(pb=tb);var ub={internals:{},config:{Promise:pb.Promise},helpers:{}},vb=ub.helpers.noop=function(){},wb=(ub.helpers.notDefined=function(a){return"undefined"==typeof a},ub.helpers.isScheduler=function(a){return a instanceof ub.Scheduler}),xb=ub.helpers.identity=function(a){return a},yb=(ub.helpers.pluck=function(a){return function(b){return b[a]}},ub.helpers.just=function(a){return function(){return a}},ub.helpers.defaultNow=Date.now),zb=ub.helpers.defaultComparer=function(a,b){return mc(a,b)},Ab=ub.helpers.defaultSubComparer=function(a,b){return a>b?1:b>a?-1:0},Bb=(ub.helpers.defaultKeySerializer=function(a){return a.toString()},ub.helpers.defaultError=function(a){throw a}),Cb=ub.helpers.isPromise=function(a){return!!a&&"function"==typeof a.then},Db=(ub.helpers.asArray=function(){return Array.prototype.slice.call(arguments)},ub.helpers.not=function(a){return!a}),Eb=ub.helpers.isFunction=function(){var a=function(a){return"function"==typeof a||!1};return a(/x/)&&(a=function(a){return"function"==typeof a&&"[object Function]"==bc.call(a)}),a}(),Fb="Sequence contains no elements.",Gb="Argument out of range",Hb="Object has been disposed";ub.config.longStackSupport=!1;var Ib=!1;try{throw new Error}catch(Jb){Ib=!!Jb.stack}var Kb,Lb=g(),Mb="From previous event:",Nb="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";pb.Set&&"function"==typeof(new pb.Set)["@@iterator"]&&(Nb="@@iterator");var Ob=ub.doneEnumerator={done:!0,value:a},Pb=ub.helpers.isIterable=function(b){return b[Nb]!==a},Qb=ub.helpers.isArrayLike=function(b){return b&&b.length!==a};ub.helpers.iterator=Nb;var Rb,Sb=ub.helpers.deprecate=function(){},Tb="[object Arguments]",Ub="[object Array]",Vb="[object Boolean]",Wb="[object Date]",Xb="[object Error]",Yb="[object Function]",Zb="[object Number]",$b="[object Object]",_b="[object RegExp]",ac="[object String]",bc=Object.prototype.toString,cc=Object.prototype.hasOwnProperty,dc=bc.call(arguments)==Tb,ec=Error.prototype,fc=Object.prototype,gc=String.prototype,hc=fc.propertyIsEnumerable;try{Rb=!(bc.call(document)==$b&&!({toString:0}+""))}catch(Jb){Rb=!0}var ic=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],jc={};jc[Ub]=jc[Wb]=jc[Zb]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},jc[Vb]=jc[ac]={constructor:!0,toString:!0,valueOf:!0},jc[Xb]=jc[Yb]=jc[_b]={constructor:!0,toString:!0},jc[$b]={constructor:!0};var kc={};!function(){var a=function(){this.x=1},b=[];a.prototype={valueOf:1,y:1};for(var c in new a)b.push(c);for(c in arguments);kc.enumErrorProps=hc.call(ec,"message")||hc.call(ec,"name"),kc.enumPrototypes=hc.call(a,"prototype"),kc.nonEnumArgs=0!=c,kc.nonEnumShadows=!/valueOf/.test(b)}(1);var lc=function(a){return a&&"object"==typeof a?bc.call(a)==Tb:!1};dc||(lc=function(a){return a&&"object"==typeof a?cc.call(a,"callee"):!1});var mc=ub.internals.isEqual=function(a,b){return n(a,b,[],[])},nc=Array.prototype.slice,oc=({}.hasOwnProperty,this.inherits=ub.internals.inherits=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}),pc=ub.internals.addProperties=function(a){for(var b=nc.call(arguments,1),c=0,d=b.length;d>c;c++){var e=b[c];for(var f in e)a[f]=e[f]}},qc=ub.internals.addRef=function(a,b){return new Od(function(c){return new tc(b.getDisposable(),a.subscribe(c))})};q.prototype.compareTo=function(a){var b=this.value.compareTo(a.value);return 0===b&&(b=this.id-a.id),b};var rc=ub.internals.PriorityQueue=function(a){this.items=new Array(a),this.length=0},sc=rc.prototype;sc.isHigherPriority=function(a,b){return this.items[a].compareTo(this.items[b])<0},sc.percolate=function(a){if(!(a>=this.length||0>a)){var b=a-1>>1;if(!(0>b||b===a)&&this.isHigherPriority(a,b)){var c=this.items[a];this.items[a]=this.items[b],this.items[b]=c,this.percolate(b)}}},sc.heapify=function(a){if(+a||(a=0),!(a>=this.length||0>a)){var b=2*a+1,c=2*a+2,d=a;if(b<this.length&&this.isHigherPriority(b,d)&&(d=b),c<this.length&&this.isHigherPriority(c,d)&&(d=c),d!==a){var e=this.items[a];this.items[a]=this.items[d],this.items[d]=e,this.heapify(d)}}},sc.peek=function(){return this.items[0].value},sc.removeAt=function(a){this.items[a]=this.items[--this.length],delete this.items[this.length],this.heapify()},sc.dequeue=function(){var a=this.peek();return this.removeAt(0),a},sc.enqueue=function(a){var b=this.length++;this.items[b]=new q(rc.count++,a),this.percolate(b)},sc.remove=function(a){for(var b=0;b<this.length;b++)if(this.items[b].value===a)return this.removeAt(b),!0;return!1},rc.count=0;var tc=ub.CompositeDisposable=function(){this.disposables=o(arguments,0),this.isDisposed=!1,this.length=this.disposables.length},uc=tc.prototype;uc.add=function(a){this.isDisposed?a.dispose():(this.disposables.push(a),this.length++)},uc.remove=function(a){var b=!1;if(!this.isDisposed){var c=this.disposables.indexOf(a);-1!==c&&(b=!0,this.disposables.splice(c,1),this.length--,a.dispose())}return b},uc.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var a=this.disposables.slice(0);this.disposables=[],this.length=0;for(var b=0,c=a.length;c>b;b++)a[b].dispose()}},uc.toArray=function(){return this.disposables.slice(0)};var vc=ub.Disposable=function(a){this.isDisposed=!1,this.action=a||vb};vc.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var wc=vc.create=function(a){return new vc(a)},xc=vc.empty={dispose:vb},yc=ub.SingleAssignmentDisposable=function(){function a(){this.isDisposed=!1,this.current=null}var b=a.prototype;return b.getDisposable=function(){return this.current},b.setDisposable=function(a){var b,c=this.isDisposed;c||(b=this.current,this.current=a),b&&b.dispose(),c&&a&&a.dispose()},b.dispose=function(){var a;this.isDisposed||(this.isDisposed=!0,a=this.current,this.current=null),a&&a.dispose()},a}(),zc=ub.SerialDisposable=yc,Ac=ub.RefCountDisposable=function(){function a(a){this.disposable=a,this.disposable.count++,this.isInnerDisposed=!1}function b(a){this.underlyingDisposable=a,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return a.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},b.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},b.prototype.getDisposable=function(){return this.isDisposed?xc:new a(this)},b}();r.prototype.dispose=function(){var a=this;this.scheduler.schedule(function(){a.isDisposed||(a.isDisposed=!0,a.disposable.dispose())})};var Bc=ub.internals.ScheduledItem=function(a,b,c,d,e){this.scheduler=a,this.state=b,this.action=c,this.dueTime=d,this.comparer=e||Ab,this.disposable=new yc};Bc.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},Bc.prototype.compareTo=function(a){return this.comparer(this.dueTime,a.dueTime)},Bc.prototype.isCancelled=function(){return this.disposable.isDisposed},Bc.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var Cc=ub.Scheduler=function(){function a(a,b,c,d){this.now=a,this._schedule=b,this._scheduleRelative=c,this._scheduleAbsolute=d}function b(a,b){return b(),xc}var c=a.prototype;return c.schedule=function(a){return this._schedule(a,b)},c.scheduleWithState=function(a,b){return this._schedule(a,b)},c.scheduleWithRelative=function(a,c){return this._scheduleRelative(c,a,b)},c.scheduleWithRelativeAndState=function(a,b,c){return this._scheduleRelative(a,b,c)},c.scheduleWithAbsolute=function(a,c){return this._scheduleAbsolute(c,a,b)},c.scheduleWithAbsoluteAndState=function(a,b,c){return this._scheduleAbsolute(a,b,c)},a.now=yb,a.normalize=function(a){return 0>a&&(a=0),a},a}(),Dc=Cc.normalize;!function(a){function b(a,b){var c=b.first,d=b.second,e=new tc,f=function(b){d(b,function(b){var c=!1,d=!1,g=a.scheduleWithState(b,function(a,b){return c?e.remove(g):d=!0,f(b),xc});d||(e.add(g),c=!0)})};return f(c),e}function c(a,b,c){var d=b.first,e=b.second,f=new tc,g=function(b){e(b,function(b,d){var e=!1,h=!1,i=a[c].call(a,b,d,function(a,b){return e?f.remove(i):h=!0,g(b),xc});h||(f.add(i),e=!0)})};return g(d),f}function d(a,b){a(function(c){b(a,c)})}a.scheduleRecursive=function(a){return this.scheduleRecursiveWithState(a,function(a,b){a(function(){b(a)})})},a.scheduleRecursiveWithState=function(a,c){return this.scheduleWithState({first:a,second:c},b)},a.scheduleRecursiveWithRelative=function(a,b){return this.scheduleRecursiveWithRelativeAndState(b,a,d)},a.scheduleRecursiveWithRelativeAndState=function(a,b,d){return this._scheduleRelative({first:a,second:d},b,function(a,b){return c(a,b,"scheduleWithRelativeAndState")})},a.scheduleRecursiveWithAbsolute=function(a,b){return this.scheduleRecursiveWithAbsoluteAndState(b,a,d)},a.scheduleRecursiveWithAbsoluteAndState=function(a,b,d){return this._scheduleAbsolute({first:a,second:d},b,function(a,b){return c(a,b,"scheduleWithAbsoluteAndState")})}}(Cc.prototype),function(){Cc.prototype.schedulePeriodic=function(a,b){return this.schedulePeriodicWithState(null,a,b)},Cc.prototype.schedulePeriodicWithState=function(a,b,c){if("undefined"==typeof pb.setInterval)throw new Error("Periodic scheduling not supported.");var d=a,e=pb.setInterval(function(){d=c(d)},b);return wc(function(){pb.clearInterval(e)})}}(Cc.prototype),function(a){a.catchError=a["catch"]=function(a){return new Nc(this,a)}}(Cc.prototype);var Ec,Fc=ub.internals.SchedulePeriodicRecursive=function(){function a(a,b){b(0,this._period);try{this._state=this._action(this._state)}catch(c){throw this._cancel.dispose(),c}}function b(a,b,c,d){this._scheduler=a,this._state=b,this._period=c,this._action=d}return b.prototype.start=function(){var b=new yc;return this._cancel=b,b.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,a.bind(this))),b},b}(),Gc=Cc.immediate=function(){function a(a,b){return b(this,a)}function b(a,b,c){for(var d=Dc(b);d-this.now()>0;);return c(this,a)}function c(a,b,c){return this.scheduleWithRelativeAndState(a,b-this.now(),c)}return new Cc(yb,a,b,c)}(),Hc=Cc.currentThread=function(){function a(a){for(var b;a.length>0;)if(b=a.dequeue(),!b.isCancelled()){for(;b.dueTime-Cc.now()>0;);b.isCancelled()||b.invoke()}}function b(a,b){return this.scheduleWithRelativeAndState(a,0,b)}function c(b,c,d){var f=this.now()+Cc.normalize(c),g=new Bc(this,b,d,f);if(e)e.enqueue(g);else{e=new rc(4),e.enqueue(g);try{a(e)}catch(h){throw h}finally{e=null}}return g.disposable}function d(a,b,c){return this.scheduleWithRelativeAndState(a,b-this.now(),c)}var e,f=new Cc(yb,b,c,d);return f.scheduleRequired=function(){return!e},f.ensureTrampoline=function(a){e?a():this.schedule(a)},f}(),Ic=vb,Jc=function(){var a,b=vb;if("WScript"in this)a=function(a,b){WScript.Sleep(b),a()};else{if(!pb.setTimeout)throw new Error("No concurrency detected!");a=pb.setTimeout,b=pb.clearTimeout}return{setTimeout:a,clearTimeout:b}}(),Kc=Jc.setTimeout,Lc=Jc.clearTimeout;!function(){function a(){if(!pb.postMessage||pb.importScripts)return!1;var a=!1,b=pb.onmessage;return pb.onmessage=function(){a=!0},pb.postMessage("","*"),pb.onmessage=b,a}var b=RegExp("^"+String(bc).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),c="function"==typeof(c=tb&&sb&&tb.setImmediate)&&!b.test(c)&&c,d="function"==typeof(d=tb&&sb&&tb.clearImmediate)&&!b.test(d)&&d;if("function"==typeof c)Ec=c,Ic=d;else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))Ec=process.nextTick;else if(a()){var e="ms.rx.schedule"+Math.random(),f={},g=0,h=function(a){if("string"==typeof a.data&&a.data.substring(0,e.length)===e){var b=a.data.substring(e.length),c=f[b];c(),delete f[b]}};pb.addEventListener?pb.addEventListener("message",h,!1):pb.attachEvent("onmessage",h,!1),Ec=function(a){var b=g++;f[b]=a,pb.postMessage(e+b,"*")}}else if(pb.MessageChannel){var i=new pb.MessageChannel,j={},k=0;i.port1.onmessage=function(a){var b=a.data,c=j[b];c(),delete j[b]},Ec=function(a){var b=k++;j[b]=a,i.port2.postMessage(b)}}else"document"in pb&&"onreadystatechange"in pb.document.createElement("script")?Ec=function(a){var b=pb.document.createElement("script");b.onreadystatechange=function(){a(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},pb.document.documentElement.appendChild(b)}:(Ec=function(a){return Kc(a,0)},Ic=Lc)}();var Mc=Cc.timeout=function(){function a(a,b){var c=this,d=new yc,e=Ec(function(){d.isDisposed||d.setDisposable(b(c,a))});return new tc(d,wc(function(){Ic(e)}))}function b(a,b,c){var d=this,e=Cc.normalize(b);if(0===e)return d.scheduleWithState(a,c);var f=new yc,g=Kc(function(){f.isDisposed||f.setDisposable(c(d,a))},e);return new tc(f,wc(function(){Lc(g)}))}function c(a,b,c){return this.scheduleWithRelativeAndState(a,b-this.now(),c)}return new Cc(yb,a,b,c)}(),Nc=function(a){function b(a,b){return this._scheduler.scheduleWithState(a,this._wrap(b))}function c(a,b,c){return this._scheduler.scheduleWithRelativeAndState(a,b,this._wrap(c))}function d(a,b,c){return this._scheduler.scheduleWithAbsoluteAndState(a,b,this._wrap(c))}function e(e,f){this._scheduler=e,this._handler=f,this._recursiveOriginal=null,this._recursiveWrapper=null,a.call(this,this._scheduler.now.bind(this._scheduler),b,c,d)}return oc(e,a),e.prototype._clone=function(a){return new e(a,this._handler)},e.prototype._wrap=function(a){var b=this;return function(c,d){try{return a(b._getRecursiveWrapper(c),d)}catch(e){if(!b._handler(e))throw e;return xc}}},e.prototype._getRecursiveWrapper=function(a){if(this._recursiveOriginal!==a){this._recursiveOriginal=a;var b=this._clone(a);b._recursiveOriginal=a,b._recursiveWrapper=b,this._recursiveWrapper=b}return this._recursiveWrapper},e.prototype.schedulePeriodicWithState=function(a,b,c){var d=this,e=!1,f=new yc;return f.setDisposable(this._scheduler.schedulePeriodicWithState(a,b,function(a){if(e)return null;try{return c(a)}catch(b){if(e=!0,!d._handler(b))throw b;return f.dispose(),null}})),f},e}(Cc),Oc=ub.Notification=function(){function a(a,b){this.hasValue=null==b?!1:b,this.kind=a}return a.prototype.accept=function(a,b,c){return a&&"object"==typeof a?this._acceptObservable(a):this._accept(a,b,c)},a.prototype.toObservable=function(a){var b=this;return wb(a)||(a=Gc),new Od(function(c){return a.schedule(function(){b._acceptObservable(c),"N"===b.kind&&c.onCompleted()})})},a}(),Pc=Oc.createOnNext=function(){function a(a){return a(this.value)}function b(a){return a.onNext(this.value)}function c(){return"OnNext("+this.value+")"}return function(d){var e=new Oc("N",!0);return e.value=d,e._accept=a,e._acceptObservable=b,e.toString=c,e}}(),Qc=Oc.createOnError=function(){function a(a,b){return b(this.exception)}function b(a){return a.onError(this.exception)}function c(){return"OnError("+this.exception+")"}return function(d){var e=new Oc("E");return e.exception=d,e._accept=a,e._acceptObservable=b,e.toString=c,e}}(),Rc=Oc.createOnCompleted=function(){function a(a,b,c){return c()}function b(a){return a.onCompleted()}function c(){return"OnCompleted()"}return function(){var d=new Oc("C");return d._accept=a,d._acceptObservable=b,d.toString=c,d}}(),Sc=ub.internals.Enumerator=function(a){this._next=a};Sc.prototype.next=function(){return this._next()},Sc.prototype[Nb]=function(){return this};var Tc=ub.internals.Enumerable=function(a){this._iterator=a};Tc.prototype[Nb]=function(){return this._iterator()},Tc.prototype.concat=function(){var a=this;return new Od(function(b){var c;try{c=a[Nb]()}catch(d){return void b.onError(d)}var e,f=new zc,g=Gc.scheduleRecursive(function(a){var d;if(!e){try{d=c.next()}catch(g){return void b.onError(g)}if(d.done)return void b.onCompleted();var h=d.value;Cb(h)&&(h=dd(h));var i=new yc;f.setDisposable(i),i.setDisposable(h.subscribe(b.onNext.bind(b),b.onError.bind(b),function(){a()}))}});return new tc(f,g,wc(function(){e=!0}))})},Tc.prototype.catchError=function(){var a=this;return new Od(function(b){var c;try{c=a[Nb]()}catch(d){return void b.onError(d)}var e,f,g=new zc,h=Gc.scheduleRecursive(function(a){if(!e){var d;try{d=c.next()}catch(h){return void b.onError(h)}if(d.done)return void(f?b.onError(f):b.onCompleted());var i=d.value;Cb(i)&&(i=dd(i));var j=new yc;g.setDisposable(j),j.setDisposable(i.subscribe(b.onNext.bind(b),function(b){f=b,a()},b.onCompleted.bind(b)))}});return new tc(g,h,wc(function(){e=!0}))})};var Uc=Tc.repeat=function(a,b){return null==b&&(b=-1),new Tc(function(){var c=b;return new Sc(function(){return 0===c?Ob:(c>0&&c--,{done:!1,value:a})})})},Vc=Tc.of=function(a,b,c){return b||(b=xb),new Tc(function(){var d=-1;return new Sc(function(){return++d<a.length?{done:!1,value:b.call(c,a[d],d,a)}:Ob})})},Wc=ub.Observer=function(){};Wc.prototype.toNotifier=function(){var a=this;return function(b){return b.accept(a)}},Wc.prototype.asObserver=function(){return new $c(this.onNext.bind(this),this.onError.bind(this),this.onCompleted.bind(this))},Wc.prototype.checked=function(){return new _c(this)};var Xc=Wc.create=function(a,b,c){return a||(a=vb),b||(b=Bb),c||(c=vb),new